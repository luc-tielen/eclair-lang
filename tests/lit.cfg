import subprocess, os
import lit.formats

config.name = "Eclair integration tests"
config.test_format = lit.formats.ShTest(False)  # 1 test per file
config.suffixes = ['.eclair']
config.excludes = ['Test']  # Don't look in the directory for Haskell tests

test_dir = os.path.dirname(__file__)
config.test_source_root = test_dir
config.test_exec_root = test_dir

analysis_dir = test_dir + '/../cbits/'
config.environment['DATALOG_DIR'] = analysis_dir
config.environment['ECLAIR_USE_COLOR'] = '0'

config.substitutions.append(('%eclair', os.environ.get('ECLAIR_BIN', 'eclair')))
config.substitutions.append(('%clang', os.environ.get('CLANG_BIN', 'clang')))
